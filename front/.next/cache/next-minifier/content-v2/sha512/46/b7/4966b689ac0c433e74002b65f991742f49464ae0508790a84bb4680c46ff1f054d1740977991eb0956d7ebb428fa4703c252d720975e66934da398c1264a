{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{RNiq:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__N_SSP\",(function(){return p}));var c=n(\"q1tI\"),i=n(\"/MKj\"),a=n(\"1zst\"),o=n(\"kduo\"),r=n(\"ODXe\"),l=n(\"Vl3Y\"),s=n(\"5rEg\"),u=n(\"2/Rp\"),d=n(\"3zrx\"),j=n(\"p+NB\"),b=n(\"nKUr\");var f=function(){var t=Object(c.useRef)(),e=Object(i.b)(),n=Object(i.c)((function(t){return t.post})),a=n.addPostDone,o=n.addPostLoading,f=Object(i.c)((function(t){return t.post})).imagePaths,p=Object(d.a)(\"\"),O=Object(r.a)(p,3),h=O[0],m=O[1],v=O[2];Object(c.useEffect)((function(){a&&v(\"\")}),[a]);var w=Object(c.useCallback)((function(){var t=new FormData;f.forEach((function(e){t.append(\"image\",e)})),t.append(\"content\",h),e({type:j.e,data:t})}),[h,f]),x=Object(c.useCallback)((function(e){t.current.click()}),[t.current]),g=Object(c.useCallback)((function(t){var n=new FormData;[].forEach.call(t.target.files,(function(t){n.append(\"image\",t)})),e({type:j.G,data:n})}),[]),E=Object(c.useCallback)((function(t){return function(){e({type:j.v,data:t})}}),[]);return Object(b.jsxs)(l.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:w,children:[Object(b.jsx)(s.a.TextArea,{value:h,onChange:m,maxLength:140,placeholder:\"\\ud3ec\\uc2a4\\ud2b8 \\uc785\\ub825\"}),Object(b.jsxs)(\"div\",{children:[Object(b.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:t,onChange:g}),Object(b.jsx)(u.a,{onClick:x,children:\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"}),Object(b.jsx)(u.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",loading:o,children:\"\\ub4f1\\ub85d\"})]}),Object(b.jsx)(\"div\",{children:f.map((function(t,e){return Object(b.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(b.jsx)(\"img\",{src:\"http://localhost:3065/\".concat(t),style:{width:\"200px\"},alt:t}),Object(b.jsx)(\"div\",{children:Object(b.jsx)(u.a,{onClick:E(e),children:\"\\uc81c\\uac70\"})})]},t)}))})]})};var p=!0;e.default=function(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.user})).me,n=Object(i.c)((function(t){return t.post})),r=n.mainPosts,l=n.hasMorePosts,s=n.loadPostsLoading,u=n.retweetError;return Object(c.useEffect)((function(){u&&alert(u)}),[u]),Object(c.useEffect)((function(){function e(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&l&&!s){var e;console.log(l,s);var n=null===(e=r[r.length-1])||void 0===e?void 0:e.id;t({type:j.n,lastId:n})}}return window.addEventListener(\"scroll\",e),function(){window.removeEventListener(\"scroll\",e)}}),[l,s]),Object(b.jsxs)(a.a,{children:[e&&Object(b.jsx)(f,{}),r.map((function(t){return Object(b.jsx)(o.a,{post:t},t.id)}))]})}},vlRD:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,6,0,3,4,5,7]]]);","extractedComments":[]}