{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{RNiq:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__N_SSP\",(function(){return p}));var c=n(\"q1tI\"),i=n(\"/MKj\"),a=n(\"1zst\"),o=n(\"kduo\"),r=n(\"ODXe\"),l=n(\"Vl3Y\"),s=n(\"5rEg\"),u=n(\"2/Rp\"),d=n(\"3zrx\"),j=n(\"p+NB\"),b=n(\"nKUr\");var f=function(){var t=Object(c.useRef)(),e=Object(i.b)(),n=Object(i.c)((function(t){return t.post})),a=n.addPostDone,o=n.addPostLoading,f=Object(i.c)((function(t){return t.post})).imagePaths,p=Object(d.a)(\"\"),O=Object(r.a)(p,3),h=O[0],m=O[1],v=O[2];Object(c.useEffect)((function(){a&&v(\"\")}),[a]);var w=Object(c.useCallback)((function(){var t=new FormData;f.forEach((function(e){t.append(\"image\",e)})),t.append(\"content\",h),e({type:j.e,data:t})}),[h,f]),x=Object(c.useCallback)((function(e){t.current.click()}),[t.current]),g=Object(c.useCallback)((function(t){var n=new FormData;[].forEach.call(t.target.files,(function(t){n.append(\"image\",t)})),e({type:j.G,data:n})}),[]),E=Object(c.useCallback)((function(t){return function(){e({type:j.v,data:t})}}),[]);return Object(b.jsxs)(l.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:w,children:[Object(b.jsx)(s.a.TextArea,{value:h,onChange:m,maxLength:140,placeholder:\"\\ud3ec\\uc2a4\\ud2b8 \\uc785\\ub825\"}),Object(b.jsxs)(\"div\",{children:[Object(b.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:t,onChange:g}),Object(b.jsx)(u.a,{onClick:x,children:\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"}),Object(b.jsx)(u.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",loading:o,children:\"\\ub4f1\\ub85d\"})]}),Object(b.jsx)(\"div\",{children:f.map((function(t,e){return Object(b.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(b.jsx)(\"img\",{src:\"http://localhost:3065/\".concat(t),style:{width:\"200px\"},alt:t}),Object(b.jsx)(\"div\",{children:Object(b.jsx)(u.a,{onClick:E(e),children:\"\\uc81c\\uac70\"})})]},t)}))})]})};var p=!0;e.default=function(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.user})).me,n=Object(i.c)((function(t){return t.post})),r=n.mainPosts,l=n.hasMorePosts,s=n.loadPostsLoading,u=n.retweetError;return Object(c.useEffect)((function(){u&&alert(u)}),[u]),Object(c.useEffect)((function(){function e(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&l&&!s){var e;console.log(l,s);var n=null===(e=r[r.length-1])||void 0===e?void 0:e.id;t({type:j.n,lastId:n})}}return window.addEventListener(\"scroll\",e),function(){window.removeEventListener(\"scroll\",e)}}),[l,s]),Object(b.jsxs)(a.a,{children:[e&&Object(b.jsx)(f,{}),r.map((function(t){return Object(b.jsx)(o.a,{post:t},t.id)}))]})}},vlRD:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,6,0,3,4,5,7]]]);","map":{"version":3,"sources":["static/chunks/pages/index-5de3048d6e5fce683fab.js"],"names":["_N_E","window","push","RNiq","module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","react","es","AppLayout","PostCard","slicedToArray","es_form","input","es_button","useInput","reducers_post","jsx_runtime","components_PostForm","imageInput","Object","dispatch","_useSelector","state","post","addPostDone","addPostLoading","imagePaths","_useInput","_useInput2","text","onChangeText","setText","onSubmit","formData","FormData","forEach","p","append","type","data","onClickImageUpload","e","current","click","onChangeImage","imageFormData","call","target","files","f","onRemoveImage","index","style","margin","encType","onFinish","children","TextArea","value","onChange","maxLength","placeholder","name","multiple","hidden","ref","onClick","float","htmlType","loading","map","v","i","display","src","concat","width","alt","me","user","_useSelector2","mainPosts","hasMorePosts","loadPostsLoading","retweetError","alert","onScroll","scrollY","document","documentElement","clientHeight","scrollHeight","_mainPosts","console","log","lastId","length","id","addEventListener","removeEventListener","vlRD","exports","__NEXT_P"],"mappings":"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"},"extractedComments":[]}