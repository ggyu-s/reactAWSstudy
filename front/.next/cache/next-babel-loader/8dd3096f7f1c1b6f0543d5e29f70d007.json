{"ast":null,"code":"import React, { useCallback, useEffect, useState } from \"react\";\nimport Head from \"next/head\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Router from \"next/router\";\nimport axios from \"axios\";\nimport useSWR from \"swr\";\nimport { LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST } from \"../reducers/user\";\nimport AppLayout from \"../components/AppLayout\";\nimport NicknameEditForm from \"../components/NicknameEditForm\";\nimport FollowList from \"../components/FollowList\";\nimport { LOAD_POSTS_REQUEST } from \"../reducers/post\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar fetcher = function fetcher(url) {\n  return axios.get(url, {\n    withCredentials: true\n  }).then(function (result) {\n    console.log(result.data);\n    return result.data;\n  });\n};\n\nfunction Profile() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me,\n      loadFollowersLoading = _useSelector.loadFollowersLoading,\n      loadFollowingsLoading = _useSelector.loadFollowingsLoading; // const { followers, error: followerError } = useSWR(\n  //   \"http://localhost:3065/user/f/followers\",\n  //   fetcher\n  // );\n  // const { followings } = useSWR(\n  //   \"http://localhost:3065/user/f/followings\",\n  //   fetcher\n  // );\n\n\n  var _useState = useState(3),\n      followersLimit = _useState[0],\n      setFollowersLimit = _useState[1];\n\n  var _useState2 = useState(3),\n      followingsLimit = _useState2[0],\n      setFollowingsLimit = _useState2[1];\n\n  useEffect(function () {\n    dispatch({\n      type: LOAD_FOLLOWERS_REQUEST,\n      data: followersLimit\n    });\n    dispatch({\n      type: LOAD_FOLLOWINGS_REQUEST,\n      data: followingsLimit\n    });\n    setFollowingsLimit(function (prev) {\n      return prev + 3;\n    });\n    setFollowersLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n  var loadMoreFollowings = useCallback(function () {\n    setFollowingsLimit(function (prev) {\n      return prev + 3;\n    });\n    dispatch({\n      type: LOAD_FOLLOWINGS_REQUEST,\n      data: followingsLimit\n    });\n  }, [followingsLimit]);\n  var loadMoreFollowers = useCallback(function () {\n    setFollowersLimit(function (prev) {\n      return prev + 3;\n    });\n    dispatch({\n      type: LOAD_FOLLOWERS_REQUEST,\n      data: followersLimit\n    });\n  }, [followersLimit]);\n  useEffect(function () {\n    if (!(me && me.id)) {\n      Router.push(\"/\");\n    }\n  }, [me && me.id]); // if (followerError || followingError) {\n  //   console.error(followingError || followerError);\n  //   return <div>팔로잉/팔로워 로딩 중 에러가 발생합니다.</div>;\n  // }\n\n  if (!me) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        charSet: \"utf-8\"\n      }), /*#__PURE__*/_jsx(\"title\", {\n        children: \"\\uB0B4\\uD504\\uB85C\\uD544 NodeBird\"\n      })]\n    }), /*#__PURE__*/_jsxs(AppLayout, {\n      children: [/*#__PURE__*/_jsx(NicknameEditForm, {}), /*#__PURE__*/_jsx(FollowList, {\n        header: \"\\uD314\\uB85C\\uC789\",\n        data: me.Followings,\n        onClickMore: loadMoreFollowings,\n        loading: loadFollowersLoading && loadFollowingsLoading\n      }), /*#__PURE__*/_jsx(FollowList, {\n        header: \"\\uD314\\uB85C\\uC6CC\",\n        data: me.Followers,\n        onClickMore: loadMoreFollowers,\n        loading: loadFollowersLoading && loadFollowingsLoading\n      })]\n    })]\n  });\n}\n\nexport var __N_SSP = true;\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}