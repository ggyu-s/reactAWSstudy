{"version":3,"sources":["webpack://_N_E/./pages/hashtag/[tag].js","webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?df23"],"names":["Hashtag","dispatch","useDispatch","tag","useRouter","query","useSelector","state","post","mainPosts","hasMorePosts","loadPostsLoading","useEffect","onScroll","window","scrollY","document","documentElement","clientHeight","scrollHeight","console","log","type","LOAD_HASHTAG_POSTS_REQUEST","lastId","length","id","data","addEventListener","removeEventListener","map","c","__NEXT_P","push"],"mappings":"yGAAA,uI,SA0EeA,UA9Df,WACE,IAAMC,EAAWC,cAETC,EADOC,sBACQC,MAAfF,IAHS,EAIqCG,aACpD,SAACC,GAAD,OAAWA,EAAMC,QADXC,EAJS,EAITA,UAAWC,EAJF,EAIEA,aAAcC,EAJhB,EAIgBA,iBA4BjC,OAxBAC,qBAAU,WACR,SAASC,IAELC,OAAOC,QAAUC,SAASC,gBAAgBC,aAC1CF,SAASC,gBAAgBE,aAAe,KAEpCT,IAAiBC,IACnBS,QAAQC,IAAIX,EAAcC,GAC1BV,EAAS,CACPqB,KAAMC,IACNC,OACEf,EAAUA,EAAUgB,OAAS,IAC7BhB,EAAUA,EAAUgB,OAAS,GAAGC,GAClCC,KAAMxB,KAMd,OADAW,OAAOc,iBAAiB,SAAUf,GAC3B,WACLC,OAAOe,oBAAoB,SAAUhB,MAEtC,CAACH,EAAcD,EAAUgB,OAAQtB,EAAKQ,IAGvC,mCACE,cAAC,IAAD,UACGF,EAAUqB,KAAI,SAACC,GAAD,OACb,cAAC,IAAD,CAAqBvB,KAAMuB,GAAZA,EAAEL,a,sBC/CtBZ,OAAOkB,SAAWlB,OAAOkB,UAAY,IAAIC,KAAK,CAC7C,iBACA,WACE,OAAO,EAAQ,a","file":"static/chunks/pages/hashtag/[tag]-a449ac9520a34ba47ee1.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { END } from \"redux-saga\";\nimport { useRouter } from \"next/router\";\nimport axios from \"axios\";\n\nimport AppLayout from \"../../components/AppLayout\";\nimport wrapper from \"../../store/configureStore\";\nimport { LOAD_MY_INFO_REQUEST } from \"../../reducers/user\";\nimport PostCard from \"../../components/PostCard\";\nimport { LOAD_HASHTAG_POSTS_REQUEST } from \"../../reducers/post\";\n\nfunction Hashtag() {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const { tag } = router.query;\n  const { mainPosts, hasMorePosts, loadPostsLoading } = useSelector(\n    (state) => state.post\n  );\n\n  useEffect(() => {\n    function onScroll() {\n      if (\n        window.scrollY + document.documentElement.clientHeight >\n        document.documentElement.scrollHeight - 300\n      ) {\n        if (hasMorePosts && !loadPostsLoading) {\n          console.log(hasMorePosts, loadPostsLoading);\n          dispatch({\n            type: LOAD_HASHTAG_POSTS_REQUEST,\n            lastId:\n              mainPosts[mainPosts.length - 1] &&\n              mainPosts[mainPosts.length - 1].id,\n            data: tag,\n          });\n        }\n      }\n    }\n    window.addEventListener(\"scroll\", onScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [hasMorePosts, mainPosts.length, tag, loadPostsLoading]);\n\n  return (\n    <>\n      <AppLayout>\n        {mainPosts.map((c) => (\n          <PostCard key={c.id} post={c} />\n        ))}\n      </AppLayout>\n    </>\n  );\n}\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  async (context) => {\n    const cookie = context.req ? context.req.headers.cookie : \"\";\n    axios.defaults.headers.Cookie = \"\";\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch({\n      type: LOAD_MY_INFO_REQUEST,\n    });\n    context.store.dispatch({\n      type: LOAD_HASHTAG_POSTS_REQUEST,\n      data: context.params.tag,\n    });\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  }\n);\n\nexport default Hashtag;\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/hashtag/[tag]\",\n      function () {\n        return require(\"private-next-pages/hashtag/[tag].js\");\n      }\n    ]);\n  "],"sourceRoot":""}